<div
  class="mapbox"
  data-controller="mapbox"
  data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
  data-mapbox-hotspots-value="<%= @hotspots.to_json %>"
  data-mapbox-waypoints-value="<%= @waypoints.to_json%>"
  data-mapbox-start-points-value="<%= @start_points.to_json %>"
  data-mapbox-current-position-value="true"
  data-mapbox-live-track-value="true"
  data-mapbox-center-current-value="true"
>
  <div data-mapbox-target="map" id="map" class="full-screen-map"></div>

  <%= simple_form_for [:live, @walk] do |f| %>
    <%= f.input :waypoints, as: :hidden, input_html: { value: "INIT", data: { mapbox_target: 'waypoints' } } %>
    <%= f.input :distance, as: :hidden, input_html: { value: "0", data: { mapbox_target: 'distance' } } %>
    <%= f.input :duration, as: :hidden, input_html: { value: "0", data: { mapbox_target: 'duration' } } %>
    <%= f.submit "End walk", class: "map-btn btn-max", data: { action: 'click->mapbox#endWalk' } %>
  <% end %>
</div>
